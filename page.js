class page{constructor(){this.YouTube=new YouTube,$("#urlLabel").change(()=>{pageElement.labelAltered()}),$("#form").submit(()=>(pageElement.submit(),!1)),$("#formModal").submit(()=>(pageElement.modalSubmit(),!1)),$(".close").click(()=>{$("dialog")[0].close()})}async delay(a){return await new Promise(b=>setTimeout(b,a))}async toogleProgressBar(a){if(a){var b=parseFloat($(".mdl-progress").css("opacity"));for(b;1>=b;b+=.1)$(".mdl-progress").css("opacity",(b+"").slice(0,3)),await this.delay(350)}else{var b=parseFloat($(".mdl-progress").css("opacity"));for(b;0<=b&&($(".mdl-progress").css("opacity",(b+"").slice(0,3)),await this.delay(350),0!=b);b=(b-.1+"").slice(0,3));}}labelAltered(){const a=$("#urlLabel").val(),b=this.YouTube.Url(a);!0===b?($("#button1").prop("disabled",!1),$(".mdl-textfield").removeClass("is-invalid")):!1===b&&(""==a?($("#button1").prop("disabled",!0),$(".mdl-textfield").removeClass("is-invalid")):($("#button1").prop("disabled",!0),$(".mdl-textfield").addClass("is-invalid")))}async modalSubmit(){await $(".yesVideo").hide(1e3),await this.delay(1e3),$(".mdl-dialog .mdl-dialog__actions").addClass("d-none"),$(".loading").removeClass("d-none");var a={traduzir:$("#translations").val(),option:$("#legendSelect").val()};await this.delay(500),await this.YouTube.processLegend(a),$("dialog")[0].close(),$(".yesVideo").show(),this.dowload()}dowload(){var a=new Blob([this.YouTube.legend],{type:"text/plain;charset=utf-8"});saveAs(a,this.YouTube.videoName+".srt")}async submit(){$(".loading").addClass("d-none"),$(".mdl-dialog .mdl-dialog__actions").removeClass("d-none"),await this.toogleProgressBar(!0);const a=await this.YouTube.VideoData();if(null==a)$(".noVideo").removeClass("d-none"),$(".yesVideo").addClass("d-none"),$("#formModal button[type=submit]").prop("disabled",!0);else{$(".noVideo").addClass("d-none"),$(".yesVideo").removeClass("d-none"),$("#formModal button[type=submit]").prop("disabled",!1),$("#videoName").html(a.name),$("#videoChannel").html(a.canal),$("#videoDuration").html(a.time.minutos+":"+a.time.segundos),$("#videoImage").prop("src",a.image);const d=await this.YouTube.legendsData();if(null!=d&&null!=d.legendas){$(".noLegends").addClass("d-none"),$(".yesLegends").removeClass("d-none");for(let a=0;a<d.legendas.length;a++){const e=d.legendas[a],f=e.name,g=e.lang_name;var b=g;if(""!=f&&(b+=" - "+f),0!=a){var c=document.createElement("option");c.setAttribute("value",a),c.innerHTML=b,document.getElementById("legendSelect").appendChild(c)}else{var c=document.getElementById("op1");c.setAttribute("value",a),c.innerHTML=b}}for(let a=0;a<d.traducoes.length;a++){const b=d.traducoes[a],e="Traduzido para "+b.lang_name;var c=document.createElement("option");c.setAttribute("value",a),c.innerHTML=e,document.getElementById("translations").appendChild(c)}}else $(".noLegends").removeClass("d-none"),$("#formModal button[type=submit]").prop("disabled",!0),$(".yesLegends").addClass("d-none")}this.toogleProgressBar(!1),$("dialog")[0].showModal()}}