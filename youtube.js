class YouTube{Url(t){return this.url=t,this.verificateUrl()}verificateUrl(){var t=this.url,e="";return void 0!==(t=t.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]&&(e=t[2].split(/[^0-9a-z_\-]/i),this.id=e[0],!0)}async youtubeApiV3(t,e){var i="https://www.googleapis.com/youtube/v3/"+t+"?";const s=Object.keys(e),a=s.length;for(var n=0;n<a;n++)i+=s[n]+"="+e[s[n]]+"&";return i+="key=AIzaSyBII7L44auzJSKZbYoJ3YwGFKMcjoIvaDI",await this.request(i)}async googleVideo(t){var e="https://video.google.com/timedtext?";const i=Object.keys(t),s=i.length;for(var a=0;a<s;a++)e+=i[a]+"="+t[i[a]]+"&";return await this.request(e.slice(0,-1))}async request(t){return await $.get(t)}async traduzir(t){const e="https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20190308T222210Z.e5566cee85b5528e.2cf9c95b00b1f82525b9282bc22effd7f9144e53&text="+t+"&lang=en-pt";return(await this.request(e)).text[0]}async legendsData(){const t={type:"list",v:this.id},e=await this.googleVideo(t),i=e.getElementsByTagName("track").length;if(0==i)return this.legends=null,null;{const t=[];for(let s=0;s<i;s++){const i=e.getElementsByTagName("track")[s],a={id:i.getAttribute("id"),name:i.getAttribute("name"),lang_code:i.getAttribute("lang_code"),lang_name:await this.traduzir(i.getAttribute("lang_translated"))};t.push(a)}return this.legends=t,t}}async processLegend(t){const e=this.legends[t.option],i={v:this.id,type:"track",name:e.name,lang:e.lang_code};1==t.traduzir&&(i.tlang="pt");const s=new xml(await this.googleVideo(i));this.legend=s.toSrt()}async VideoData(){const t={part:"snippet,contentDetails",id:this.id},e=await this.youtubeApiV3("videos",t);return 0!=e.items.length?(this.videoName=e.items[0].snippet.title,{name:e.items[0].snippet.title,canal:e.items[0].snippet.channelTitle,time:{segundos:e.items[0].contentDetails.duration.slice(2,-1).split("M")[1],minutos:e.items[0].contentDetails.duration.slice(2,-1).split("M")[0]},image:e.items[0].snippet.thumbnails.maxres.url}):null}}